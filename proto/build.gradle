/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds/
 */
apply plugin: 'java'
apply plugin: 'com.google.protobuf'

repositories {
  mavenCentral()
}


dependencies {
  compile("io.grpc:grpc-netty:1.7.0")
  compile("io.grpc:grpc-protobuf:1.7.0")
  compile("io.grpc:grpc-stub:1.7.0")
}

clean {
  delete protobuf.generatedFilesBaseDir
}

buildscript {
  repositories {
    mavenCentral()
  }
  dependencies {
    // ASSUMES GRADLE 2.12 OR HIGHER. Use plugin version 0.7.5 with earlier
    // gradle versions
    classpath 'com.google.protobuf:protobuf-gradle-plugin:0.8.4'
  }
}

protobuf {
  protoc {
    artifact = "com.google.protobuf:protoc:3.2.0"
  }
  plugins {
    grpc {
      artifact = 'io.grpc:protoc-gen-grpc-java:1.4.0'
    }
  }
  generateProtoTasks {
    all()*.plugins {
      grpc {}
    }
  }

  generatedFilesBaseDir = "$projectDir/src/main/generated"
}

sourceSets {
  main {
    proto {
      // In addition to the default "src/main/proto"
      srcDir "src/main/generated/main/java"
      srcDir "src/main/generated/main/grpc"
    }
  }
}
